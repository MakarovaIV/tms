{% extends 'root.html' %}

{% block content %}
<style>
	.steps-wrapper {
		display: flex;
		flex-direction: column;
	}

	.step {
		display: flex;
		flex-direction: row;
		gap: 1rem;
		margin-top: 1rem;
	}
</style>
{% if user.is_authenticated %}
	<div class="form-wrapper">
		<div class="btn-back">
			<a href="{% url 'tc_history' proj_id=proj_id suit_id=suit_id pk=tc.id %}" class="btn btn-secondary">
				Back in {{ tc_history_detail.name }}
			</a>
		</div>

		<form action="{% url 'tc_history_recover' proj_id=proj_id suit_id=suit_id tc_id=tc.id pk=tc_history_detail.id %}" method="post">

			{% if request.user.type == 'Tester' or request.user.type == 'Admin' or request.user.type == 'Owner' %}
				<button class="btn btn-outline-secondary" type="submit" >Recover version {{ tc_history_detail.id }}</button>
			{% endif %}
			<h3>Version {{ tc_history_detail.id }}</h3>

			{% csrf_token %}
				<input name="user_id" value="{{ user_id }}" class="invisible"/>
				<input name="proj_id" value="{{ proj_id }}" class="invisible"/>
				<input name="suit_id" value="{{ suit_id }}" class="invisible"/>
				<input name="steps" class="invisible"/>
				<p>{{ tc_history_detail.name }}</p>
				<p>{{ tc_history_detail.desc }}</p>
				<div class="steps-wrapper" id="stepsWrapper">
					{% for step in tc_history_detail.steps %}
						<div class="step" data-index="{{ step.index }}">
							<p class="step_number">{{ step.index }}</p>
							<p>{{ step.step_name }}</p>
							<p>{{ step.step_value }}</p>
						</div>
					{% endfor %}
				</div>
				<p name="status">{{ tc_history_detail.status }}</p>
		</form>
	</div>
{% else %}
	<div class="alert alert-warning" role="alert" style="width: 100%">
		You are not authorized
	</div>
{% endif %}
{% endblock %}